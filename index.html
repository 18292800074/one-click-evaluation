<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>‰ºòË¥®ËØÑ‰ª∑ÊñáÊ°àÁîüÊàêÂô®</title>
  <style>
    * { 
      box-sizing: border-box; 
      -webkit-tap-highlight-color: transparent;
    }
    body { 
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", sans-serif; 
      margin: 0; 
      padding: 0; 
      background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 50%, #d946ef 100%);
      background-attachment: fixed;
      min-height: 100vh;
      -webkit-font-smoothing: antialiased;
      position: relative;
      overflow-x: hidden;
    }
    body::before {
      content: '';
      position: fixed;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: 
        radial-gradient(circle at 20% 50%, rgba(99, 102, 241, 0.3) 0%, transparent 50%),
        radial-gradient(circle at 80% 80%, rgba(139, 92, 246, 0.3) 0%, transparent 50%),
        radial-gradient(circle at 40% 20%, rgba(217, 70, 239, 0.2) 0%, transparent 50%);
      animation: float 15s ease-in-out infinite;
      pointer-events: none;
    }
    @keyframes float {
      0%, 100% { transform: translate(0, 0) rotate(0deg); }
      33% { transform: translate(30px, -30px) rotate(120deg); }
      66% { transform: translate(-20px, 20px) rotate(240deg); }
    }
    .container { 
      max-width: 640px; 
      margin: 0 auto; 
      padding: 12px 12px 24px; 
    }
    .card { 
      background: rgba(255, 255, 255, 0.95); 
      border-radius: 24px; 
      box-shadow: 
        0 20px 60px rgba(0,0,0,0.3),
        0 0 0 1px rgba(255,255,255,0.8) inset,
        0 0 100px rgba(139, 92, 246, 0.1); 
      padding: 20px; 
      backdrop-filter: blur(20px);
      position: relative;
      z-index: 1;
    }
    .card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      border-radius: 24px;
      padding: 2px;
      background: linear-gradient(135deg, rgba(99, 102, 241, 0.5), rgba(217, 70, 239, 0.5));
      -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
      -webkit-mask-composite: xor;
      mask-composite: exclude;
      opacity: 0.6;
      pointer-events: none;
    }
    h1 { 
      font-size: 26px; 
      margin: 0 0 6px; 
      background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 50%, #d946ef 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      font-weight: 800;
      text-align: center;
      letter-spacing: 0.5px;
    }
    h1::after {
      content: '';
      display: block;
      width: 60px;
      height: 4px;
      background: linear-gradient(90deg, #6366f1, #d946ef);
      margin: 8px auto 0;
      border-radius: 2px;
    }
    label { 
      display: block; 
      font-size: 14px; 
      color: #333; 
      margin: 0; 
      font-weight: 600; 
    }
    
    /* ‰øÆÂ§çÂæÆ‰ø°ÊµèËßàÂô®‰∏ãÊãâÊ°ÜÊ†∑ÂºèÈóÆÈ¢ò */
    select { 
      width: 100%; 
      padding: 14px 16px; 
      border-radius: 12px; 
      border: 2px solid #e5e7eb; 
      outline: none; 
      font-size: 15px;
      background: #fff;
      color: #333;
      font-weight: 600;
      -webkit-appearance: none;
      -moz-appearance: none;
      appearance: none;
      background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%238b5cf6' stroke-width='2.5' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e");
      background-repeat: no-repeat;
      background-position: right 14px center;
      background-size: 20px;
      padding-right: 44px;
      cursor: pointer;
      box-shadow: 0 2px 8px rgba(0,0,0,0.06);
      transition: all 0.3s;
    }
    select:hover {
      border-color: #c7d2fe;
      box-shadow: 0 4px 12px rgba(99, 102, 241, 0.15);
    }
    select:focus { 
      border-color: #8b5cf6; 
      box-shadow: 0 0 0 4px rgba(139, 92, 246, 0.15), 0 4px 12px rgba(139, 92, 246, 0.2);
    }
    select option {
      padding: 10px;
      font-size: 16px;
      color: #333;
    }
    
    .actions { 
      display: flex; 
      gap: 10px; 
      margin-top: 16px; 
      flex-direction: column;
    }
    button { 
      cursor: pointer; 
      border: none; 
      padding: 14px 18px; 
      border-radius: 10px; 
      font-size: 15px; 
      font-weight: 600;
      transition: all 0.2s;
      width: 100%;
      -webkit-appearance: none;
      touch-action: manipulation;
    }
    button:active { 
      transform: scale(0.98); 
      opacity: 0.9;
    }
    .btn-primary { 
      background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 50%, #d946ef 100%); 
      color: #fff;
      box-shadow: 
        0 8px 24px rgba(139, 92, 246, 0.5),
        0 0 40px rgba(217, 70, 239, 0.2);
      position: relative;
      overflow: hidden;
      font-weight: 700;
      letter-spacing: 0.5px;
    }
    .btn-primary::before {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 0;
      height: 0;
      border-radius: 50%;
      background: rgba(255,255,255,0.4);
      transform: translate(-50%, -50%);
      transition: width 0.5s, height 0.5s;
    }
    .btn-primary:active::before {
      width: 400px;
      height: 400px;
    }
    .btn-primary::after {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: linear-gradient(45deg, transparent 30%, rgba(255,255,255,0.2) 50%, transparent 70%);
      animation: shimmer 3s infinite;
    }
    @keyframes shimmer {
      0% { transform: translateX(-100%); }
      100% { transform: translateX(100%); }
    }
    .btn-secondary { 
      background: #fff; 
      color: #6366f1; 
      border: 2px solid #c7d2fe; 
      box-shadow: 0 4px 12px rgba(0,0,0,0.08);
      font-weight: 600;
    }
    .btn-secondary:not(:disabled):hover {
      border-color: #8b5cf6;
      box-shadow: 0 6px 16px rgba(139, 92, 246, 0.2);
    }
    .btn-secondary:disabled { 
      opacity: 0.5; 
      cursor: not-allowed; 
      box-shadow: none;
      background: #f3f4f6;
      color: #9ca3af;
      border-color: #e5e7eb;
    }
    .result { 
      margin-top: 12px; 
      padding: 16px; 
      background: linear-gradient(135deg, #fffbeb 0%, #fef3c7 100%); 
      border: 2px solid #fbbf24; 
      border-radius: 12px; 
      white-space: pre-wrap; 
      word-break: break-word; 
      font-size: 14px; 
      line-height: 1.7;
      color: #78350f;
      max-height: 180px;
      overflow-y: auto;
      box-shadow: 0 4px 12px rgba(251, 191, 36, 0.2), 0 0 0 1px rgba(251, 191, 36, 0.1) inset;
      position: relative;
    }
    .result::before {
      content: 'üìù';
      position: absolute;
      top: 8px;
      right: 12px;
      font-size: 20px;
      opacity: 0.3;
    }
    .muted { 
      color: #64748b; 
      font-size: 12px; 
      margin-top: 8px; 
      text-align: center;
    }
    .footer { 
      text-align: center; 
      color: #fff; 
      font-size: 11px; 
      margin-top: 16px; 
      opacity: 0.85;
    }
    .checkbox-group {
      display: flex; 
      flex-wrap: wrap; 
      gap: 8px; 
      margin: 10px 0;
    }
    .checkbox-label {
      display: inline-flex; 
      align-items: center; 
      gap: 6px; 
      font-size: 15px; 
      color: #555; 
      cursor: pointer;
      padding: 10px 16px;
      background: #fff;
      border-radius: 12px;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      border: 2px solid #e5e7eb;
      user-select: none;
      -webkit-user-select: none;
      box-shadow: 0 2px 8px rgba(0,0,0,0.06);
    }
    .checkbox-label:hover {
      border-color: #c7d2fe;
      box-shadow: 0 4px 12px rgba(99, 102, 241, 0.15);
    }
    .checkbox-label:active {
      transform: scale(0.96);
    }
    .checkbox-label input {
      margin: 0;
      width: 18px;
      height: 18px;
      cursor: pointer;
    }
    .checkbox-label input:checked {
      accent-color: #8b5cf6;
    }
    .checkbox-label:has(input:checked) {
      background: linear-gradient(135deg, #f5f3ff 0%, #ede9fe 100%);
      border-color: #8b5cf6;
      box-shadow: 0 6px 16px rgba(139, 92, 246, 0.3), 0 0 20px rgba(139, 92, 246, 0.1);
      transform: translateY(-2px);
    }
    .checkbox-label:has(input:checked) span {
      background: linear-gradient(135deg, #8b5cf6 0%, #d946ef 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      font-weight: 700;
    }
    
    /* ÁßªÂä®Á´Ø‰ºòÂåñ */
    @media (max-width: 640px) {
      .container { padding: 10px 10px 20px; }
      .card { padding: 14px 12px; }
      h1 { font-size: 18px; margin-bottom: 10px; }
      .checkbox-label { padding: 5px 8px; font-size: 12px; }
      button { padding: 12px 16px; font-size: 14px; }
      select { padding: 10px 12px; font-size: 14px; }
    }
    
    /* ÂæÆ‰ø°ÂºïÂØºÈÅÆÁΩ© */
    .wechat-mask {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.95);
      z-index: 10000;
      display: none;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 20px;
    }
    .wechat-mask.show {
      display: flex;
    }
    .wechat-arrow {
      position: absolute;
      top: 10px;
      right: 20px;
      width: 0;
      height: 0;
      border-left: 30px solid transparent;
      border-right: 30px solid transparent;
      border-top: 40px solid #fff;
      animation: bounce 1s infinite;
    }
    @keyframes bounce {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(10px); }
    }
    .wechat-content {
      background: #fff;
      border-radius: 16px;
      padding: 32px 24px;
      max-width: 340px;
      text-align: center;
      box-shadow: 0 8px 32px rgba(0,0,0,0.3);
    }
    .wechat-content .icon {
      font-size: 48px;
      margin-bottom: 16px;
    }
    .wechat-content h2 {
      margin: 0 0 12px;
      font-size: 20px;
      color: #333;
      font-weight: 700;
    }
    .wechat-content p {
      margin: 8px 0;
      color: #666;
      font-size: 15px;
      line-height: 1.8;
    }
    .wechat-content .steps {
      margin: 20px 0;
      text-align: left;
      background: #f9fafb;
      padding: 16px;
      border-radius: 10px;
      font-size: 14px;
      line-height: 1.8;
      color: #555;
    }
    .wechat-content button {
      margin-top: 20px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: #fff;
      border: none;
      padding: 14px 28px;
      border-radius: 10px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      width: 100%;
    }
  </style>
  <meta name="referrer" content="no-referrer">
</head>
<body>
  <div class="container">
    <div class="card">
      <h1>üí¨ ËØÑ‰ª∑ÊñáÊ°àÁîüÊàê</h1>
      
      <div style="display: flex; gap: 12px; margin: 16px 0;">
        <div style="flex: 1;">
          <label style="margin: 0 0 8px;">‚úÇÔ∏è Á±ªÁõÆ</label>
          <div class="checkbox-group" style="gap: 6px;">
            <label class="checkbox-label" style="padding: 6px 10px; font-size: 13px;">
              <input type="checkbox" value="Ââ™Âèë"><span>Ââ™Âèë</span>
        </label>
            <label class="checkbox-label" style="padding: 6px 10px; font-size: 13px;">
              <input type="checkbox" value="ÁÉ´Âèë"><span>ÁÉ´Âèë</span>
        </label>
            <label class="checkbox-label" style="padding: 6px 10px; font-size: 13px;">
              <input type="checkbox" value="ÊüìÂèë"><span>ÊüìÂèë</span>
        </label>
            <label class="checkbox-label" style="padding: 6px 10px; font-size: 13px;">
              <input type="checkbox" value="Êä§ÁêÜ"><span>Êä§ÁêÜ</span>
        </label>
            <label class="checkbox-label" style="padding: 6px 10px; font-size: 13px;">
              <input type="checkbox" value="ÈÄ†Âûã"><span>ÈÄ†Âûã</span>
        </label>
          </div>
        </div>
      </div>

      <div style="display: flex; gap: 12px; margin: 12px 0;">
        <div style="flex: 1;">
          <label style="margin: 0 0 8px;">üë§ ÊúçÂä°‰∫∫Âëò <span style="color: #999; font-size: 12px; font-weight: 400;">(ÂèØÈÄâ)</span></label>
          <div class="checkbox-group" style="gap: 6px;">
            <label class="checkbox-label" style="padding: 6px 10px; font-size: 13px;">
              <input type="checkbox" value="ËñáËñáËÄÅÂ∏à"><span>ËñáËñáËÄÅÂ∏à</span>
        </label>
            <label class="checkbox-label" style="padding: 6px 10px; font-size: 13px;">
              <input type="checkbox" value="ËµµËÄÅÂ∏à"><span>ËµµËÄÅÂ∏à</span>
        </label>
            <label class="checkbox-label" style="padding: 6px 10px; font-size: 13px;">
              <input type="checkbox" value="ÊùéËÄÅÂ∏à"><span>ÊùéËÄÅÂ∏à</span>
        </label>
            <label class="checkbox-label" style="padding: 6px 10px; font-size: 13px;">
              <input type="checkbox" value="Ê¥ãÂ≠êËÄÅÂ∏à"><span>Ê¥ãÂ≠êËÄÅÂ∏à</span>
        </label>
            <label class="checkbox-label" style="padding: 6px 10px; font-size: 13px;">
              <input type="checkbox" value="Â∞èÊù∞"><span>Â∞èÊù∞</span>
        </label>
          </div>
        </div>
      </div>

      <label for="shopPlatform" style="margin: 12px 0 8px;">üè™ Âπ≥Âè∞</label>
      <select id="shopPlatform">
        <option value="meituan">üíá ÁæéÂõ¢ÁæéÂèë</option>
        <option value="dianping">‚≠ê Â§ß‰ºóÁÇπËØÑ</option>
        <option value="douyin">üéµ ÊäñÈü≥</option>
      </select>

      <div class="actions" style="margin-top: 16px; gap: 10px;">
        <button id="btnGen" class="btn-primary">ÁîüÊàêÊñáÊ°à</button>
        <button id="btnCopyGo" class="btn-secondary" disabled>Â§çÂà∂Âπ∂Ë∑≥ËΩ¨</button>
      </div>

      <div id="result" class="result" style="display:none;"></div>
      <div id="status" class="muted"></div>
    </div>
    <div class="footer">‰ΩøÁî® DeepSeek AI Êô∫ËÉΩÁîüÊàêÔºåÊó†ÈúÄÈÖçÁΩÆÁõ¥Êé•‰ΩøÁî®</div>
  </div>

  <script>
    const $ = (id) => document.getElementById(id);
    const btnGen = $("btnGen");
    const btnCopyGo = $("btnCopyGo");
    const result = $("result");
    const status = $("status");
    
    // Ê£ÄÊµãÊòØÂê¶Âú®ÂæÆ‰ø°ÊµèËßàÂô®‰∏≠
    function isWechat() {
      const ua = navigator.userAgent.toLowerCase();
      return ua.includes('micromessenger');
    }
    
    // ÊòæÁ§∫ÂæÆ‰ø°ÂºïÂØºÈÅÆÁΩ©
    function showWechatGuide() {
      const mask = document.createElement('div');
      mask.className = 'wechat-mask show';
      mask.innerHTML = `
        <div class="wechat-arrow"></div>
        <div class="wechat-content">
          <div class="icon">üì±</div>
          <h2>ËØ∑Âú®ÊµèËßàÂô®‰∏≠ÊâìÂºÄ</h2>
          <p>ÂΩìÂâçÂú®ÂæÆ‰ø°‰∏≠ÊâìÂºÄÔºåÊó†Ê≥ïË∞ÉËµ∑ÁæéÂõ¢/ÊäñÈü≥APP</p>
          <div class="steps">
            <div>üìç Êìç‰ΩúÊ≠•È™§Ôºö</div>
            <div style="margin-top: 8px;">
              1Ô∏è‚É£ ÁÇπÂáªÂè≥‰∏äËßí"<b>...</b>"<br>
              2Ô∏è‚É£ ÈÄâÊã©"<b>Âú®ÊµèËßàÂô®‰∏≠ÊâìÂºÄ</b>"<br>
              3Ô∏è‚É£ ÁÑ∂ÂêéÂç≥ÂèØÊ≠£Â∏∏‰ΩøÁî®ÊâÄÊúâÂäüËÉΩ
            </div>
          </div>
          <button onclick="this.parentElement.parentElement.classList.remove('show')">ÊàëÁü•ÈÅì‰∫Ü</button>
        </div>
      `;
      document.body.appendChild(mask);
    }
    
    // È°µÈù¢Âä†ËΩΩÊó∂Ê£ÄÊµã
    if (isWechat()) {
      // Âª∂ËøüÊòæÁ§∫ÔºåÁ°Æ‰øùÈ°µÈù¢Âä†ËΩΩÂÆåÊàê
      window.addEventListener('DOMContentLoaded', () => {
        setTimeout(showWechatGuide, 500);
      });
    }
    
    // Âπ≥Âè∞Ê∑±Â∫¶ÈìæÊé•ÈÖçÁΩÆ
    const DEEP_LINKS = {
      meituan: "imeituan://www.meituan.com/food/poi/detail?id=1033453100",  // ÁæéÂõ¢Â∫óÈì∫Ê∑±Â∫¶ÈìæÊé•
      dianping: "dianping://shopinfo?shopuuid=k6JZYlytyJ0q9Mze",  // Â§ß‰ºóÁÇπËØÑÂ∫óÈì∫Ê∑±Â∫¶ÈìæÊé•
      douyin: "snssdk1128://poi/detail/?id=7375105554814863423"  // ÊäñÈü≥Â∫óÈì∫Ê∑±Â∫¶ÈìæÊé•
    };
    
    // Â∫óÈì∫‰ø°ÊÅØÈÖçÁΩÆ
    const SHOP_INFO = {
      name: "ÊùéÂ∞èÂØªÈÄ†ÂûãÔºàÈôÖÂçéÂπøÂú∫Â∫óÔºâ",
      address: "ÈõÅÂ°îÂå∫ÊòÜÊòéÊ±†Ë∑ØÈáëËæâÊÇ¶Â∫úÂ∞èÂåóÈó®Èó®Âè£",
      phone: "17602910667",
      meituan: {
        url: "http://dpurl.cn/ipWBl40z"  // ÁæéÂõ¢ÁΩëÈ°µÁâàÈìæÊé•
      },
      dianping: {
        url: "https://www.dianping.com/shop/k6JZYlytyJ0q9Mze"  // Â§ß‰ºóÁÇπËØÑÁΩëÈ°µÁâàÈìæÊé•
      },
      douyin: {
        url: ""  // ÊäñÈü≥ÁΩëÈ°µÁâàÈìæÊé•ÔºàÂ¶ÇÊúâÔºâ
      }
    };
    
    // ÂÖºÂÆπÊóß‰ª£Á†Å
    const MEITUAN_SHOP_INFO = {
      name: SHOP_INFO.name,
      address: SHOP_INFO.address,
      phone: SHOP_INFO.phone,
      url: SHOP_INFO.meituan.url
    };
    
    // ÁæéÂõ¢APPÊ∑±Â∫¶ÈìæÊé•ÈÖçÁΩÆ
    const MEITUAN_APP_SCHEME = "imeituan://www.meituan.com/";
    const MEITUAN_SHOP_DEEP_LINK = "imeituan://www.meituan.com/shop/";
    const MEITUAN_FALLBACK_URL = "http://dpurl.cn/ipWBl40z";
    
    // DeepSeek ÈÖçÁΩÆÔºàÂÜÖÁΩÆÔºâ
    const DEEPSEEK_CONFIG = {
      apiBase: "https://api.deepseek.com/v1",
      apiKey: "sk-33d4ff5bcb004f26a62cd6f17df25a78",
      model: "deepseek-chat"
    };

    function cutToLength(text, len) {
      if (!text) return "";
      const t = text.replace(/\s+/g, "");
      if (t.length <= len) return t;
      // ‰øùÁïôËØ≠‰πâÔºåÂ∞ΩÈáèÂú®Âè•Âè∑/È°øÂè∑Â§ÑÊà™Êñ≠
      const slice = t.slice(0, len + 4);
      const pivot = Math.max(slice.lastIndexOf("„ÄÇ"), slice.lastIndexOf("ÔºÅ"), slice.lastIndexOf("Ôºõ"), slice.lastIndexOf("Ôºå"));
      return (pivot > len - 20 ? slice.slice(0, pivot + 1) : t.slice(0, len)).trim();
    }

    async function callChatCompletions({ apiBase, apiKey, model, system, user, temperature = 0.7, maxTokens = 300 }) {
      const url = apiBase.replace(/\/$/, "") + "/chat/completions";
      const resp = await fetch(url, {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
          "Authorization": "Bearer " + apiKey
        },
        body: JSON.stringify({
          model,
          messages: [
            { role: "system", content: system },
            { role: "user", content: user }
          ],
          temperature,
          max_tokens: maxTokens
        })
      });
      if (!resp.ok) {
        let text = await resp.text().catch(() => "");
        throw new Error(`HTTP ${resp.status}: ${text}`);
      }
      const data = await resp.json();
      const content = data?.choices?.[0]?.message?.content || "";
      return content.trim();
    }

    async function generate() {
      // Ëé∑ÂèñÈÄâ‰∏≠ÁöÑÁ±ªÁõÆ
      const checkedCategories = Array.from(document.querySelectorAll('input[type="checkbox"]:checked'))
        .map(cb => cb.value);
      const category = checkedCategories.length > 0 ? checkedCategories.join('„ÄÅ') : "ÁæéÂèëÊúçÂä°";
      
      // Ëé∑ÂèñÈÄâ‰∏≠ÁöÑÊúçÂä°‰∫∫Âëò
      const checkedStaff = Array.from(document.querySelectorAll('input[type="checkbox"]:checked'))
        .filter(cb => ['ËñáËñáËÄÅÂ∏à', 'ËµµËÄÅÂ∏à', 'ÊùéËÄÅÂ∏à', 'Ê¥ãÂ≠êËÄÅÂ∏à', 'Â∞èÊù∞'].includes(cb.value))
        .map(cb => cb.value);
      const staff = checkedStaff.length > 0 ? checkedStaff.join('„ÄÅ') : "";
      
      // ÂÜÖÁΩÆ100-240Â≠óÈöèÊú∫
      const targetLength = Math.floor(Math.random() * 141) + 100; // 100-240ÈöèÊú∫
      
      // 30+ÁßçÁúüÂÆûËØÑ‰ª∑È£éÊ†º
      const styles = [
        "ÁÆÄÁü≠Áõ¥ÁôΩÂûãÔºöÂÉèÂèëÊúãÂèãÂúàÔºå‰∏âË®Ä‰∏§ËØ≠ËØ¥ÈáçÁÇπ",
        "ÁªÜËäÇ‰ΩìÈ™åÂûãÔºöÊèèËø∞ÂÖ∑‰ΩìÁöÑÊúçÂä°ÁªÜËäÇÂíåÊÑüÂèó",
        "ÂØπÊØîÊÉäÂñúÂûãÔºöÂØπÊØî‰πãÂâçÁªèÂéÜÔºåËøôÊ¨°Êõ¥Â•Ω",
        "Èó≤ËÅäÊé®ËçêÂûãÔºöÂÉèË∑üÊúãÂèãËÅäÂ§©‰∏ÄÊ†∑Ëá™ÁÑ∂",
        "ÊÑüÊÄßË°®ËææÂûãÔºö‰ªé‰∏™‰∫∫ÂøÉÊÉÖÂíåÂèòÂåñÂá∫Âèë",
        "ÂÆûÁî®‰∏ª‰πâÂûãÔºöÈáçÁÇπËØ¥ÊïàÊûúÂíå‰ΩìÈ™å",
        "È¶ñÊ¨°Â∞ùËØïÂûãÔºöÁ¨¨‰∏ÄÊ¨°Êù•ÁöÑÊñ∞È≤úÊÑüÂèó",
        "ËÄÅÈ°æÂÆ¢ÂûãÔºöÊù•ËøáÂá†Ê¨°ÔºåÂàÜ‰∫´ÁÜüÊÇâÁöÑÊÑüËßâ",
        "ÊÑèÂ§ñÊÉäÂñúÂûãÔºöÊú¨Ê≤°Êä±Â§™Â§ßÂ∏åÊúõÔºåÁªìÊûúÂæàÂ•Ω",
        "ÊúãÂèãÈô™ÂêåÂûãÔºöË∑üÊúãÂèã‰∏ÄËµ∑Êù•ÁöÑËΩªÊùæÊ∞õÂõ¥",
        "ÈöèÊÄßËá™ÁÑ∂ÂûãÔºöË∑ØËøáËøõÊù•ÁúãÁúãÁöÑÈöèÊÑè",
        "Âõ¢Ë¥≠Êª°ÊÑèÂûãÔºöÂõ¢Ë¥≠Êù•ÁöÑÔºåÊÑüËßâÂæàÂÄº",
        "‰∫åÊ¨°ÂÖâÈ°æÂûãÔºö‰∏äÊ¨°Êª°ÊÑèÊâÄ‰ª•ÂèàÊù•‰∫Ü",
        "Ë∞®ÊÖéÈÄâÊã©ÂûãÔºöÁ≤æÊåëÁªÜÈÄâÂêéÁöÑÊª°ÊÑè",
        "Âπ≥ÂíåËÆ∞ÂΩïÂûãÔºöÂπ≥Ê∑°‰ΩÜÁúüÂÆûÁöÑÊª°ÊÑè‰ΩìÈ™å",
        "Âø´ËäÇÂ•èÂûãÔºöËØ¥ËØùÁõ¥Êé•ÁÆÄÂçïÊòé‰∫Ü",
        "ÊÖ¢ËäÇÂ•èÂûãÔºöÊÇ†Èó≤ËàíÈÄÇÁöÑ‰∫´ÂèóËøáÁ®ã",
        "ÁêÜÊÄßËØÑ‰º∞ÂûãÔºöÂÆ¢ËßÇÁêÜÊÄßÂú∞ÂàÜ‰∫´‰ΩìÈ™å",
        "ÁÉ≠ÊÉÖÂàÜ‰∫´ÂûãÔºöÂºÄÂøÉÂú∞ÂàÜ‰∫´Â•Ω‰ΩìÈ™å",
        "‰ΩéË∞ÉÊª°ÊÑèÂûãÔºö‰∏çÂ§∏Âº†Âú∞Ë°®ËææÊª°ÊÑè",
        "ÊÉäËâ≥Êé®ËçêÂûãÔºöÁúüÁöÑÂæàÊÉäËâ≥ÊÉ≥Êé®Ëçê",
        "ËàíÈÄÇ‰∫´ÂèóÂûãÔºöÂº∫Ë∞ÉËàíÈÄÇÊîæÊùæÁöÑÊÑüËßâ",
        "ÊäÄÊúØËÆ§ÂèØÂûãÔºöËÆ§ÂèØÊäÄÊúØÂíåÊâãÊ≥ï",
        "ÊúçÂä°ËµûËµèÂûãÔºöÊúçÂä°ËÆ©‰∫∫ËàíÂøÉ",
        "ÁéØÂ¢ÉÂñúÁà±ÂûãÔºöÂñúÊ¨¢Â∫óÈáåÁöÑÊ∞õÂõ¥",
        "ÊïàÊûúÊª°ÊÑèÂûãÔºöÂØπÊúÄÁªàÊïàÊûúÂæàÊª°ÊÑè",
        "Áâ©ÊúâÊâÄÂÄºÂûãÔºöËßâÂæóËä±ÁöÑÈí±ÂÄº",
        "‰æøÂà©Â•ΩËØÑÂûãÔºö‰ΩçÁΩÆÊñπ‰æøÊúçÂä°‰æøÂà©",
        "Ê∏©È¶®ÊÑüÂèóÂûãÔºöÊÑüÂèóÂà∞Ê∏©È¶®ÂíåË¥¥ÂøÉ",
        "‰∏ì‰∏öËÆ§ÂêåÂûãÔºöËÆ§Âêå‰∏ì‰∏öÂ∫¶ÂíåÊ∞¥Âπ≥",
        "Ë¥¥ÂøÉÊúçÂä°ÂûãÔºöÁªÜËäÇÂ§ÑÁöÑË¥¥ÂøÉÊúçÂä°",
        "ÊÑâÂø´‰ΩìÈ™åÂûãÔºöÊï¥‰∏™ËøáÁ®ãÂæàÊÑâÂø´"
      ];
      
      const randomStyle = styles[Math.floor(Math.random() * styles.length)];
      
      // 30+ÁßçË°®ËææËßíÂ∫¶
      const perspectives = [
        "‰ªéÂèëÂûãÊïàÊûúÂÖ•Êâã",
        "‰ªéÊúçÂä°ÊÄÅÂ∫¶ÂÖ•Êâã",
        "‰ªéÁéØÂ¢ÉÊ∞õÂõ¥ÂÖ•Êâã",
        "‰ªéÊÄß‰ª∑ÊØîÂÖ•Êâã",
        "‰ªéÊäÄÊúØÊâãÊ≥ïÂÖ•Êâã",
        "‰ªéÊï¥‰Ωì‰ΩìÈ™åÂÖ•Êâã",
        "‰ªé‰∏™‰∫∫ÂèòÂåñÂÖ•Êâã",
        "‰ªéÈ¢ÑÁ∫¶ÊµÅÁ®ãÂÖ•Êâã",
        "‰ªéÊ≤üÈÄöËøáÁ®ãÂÖ•Êâã",
        "‰ªé‰∫ßÂìÅ‰ΩøÁî®ÂÖ•Êâã",
        "‰ªéÂ∫óÈì∫‰ΩçÁΩÆÂÖ•Êâã",
        "‰ªéË£Ö‰øÆÈ£éÊ†ºÂÖ•Êâã",
        "‰ªéÈü≥‰πêÊ∞õÂõ¥ÂÖ•Êâã",
        "‰ªéÂç´ÁîüÊ∏ÖÊ¥ÅÂÖ•Êâã",
        "‰ªéÊúãÂèãÊé®ËçêÂÖ•Êâã",
        "‰ªéÂÅ∂ÁÑ∂ÂèëÁé∞ÂÖ•Êâã",
        "‰ªéËÄÅÈ°æÂÆ¢ËßíÂ∫¶ÂÖ•Êâã",
        "‰ªé‰∏ì‰∏öÁ®ãÂ∫¶ÂÖ•Êâã",
        "‰ªéÁªÜÂøÉÁ®ãÂ∫¶ÂÖ•Êâã",
        "‰ªéËÄêÂøÉÁ®ãÂ∫¶ÂÖ•Êâã",
        "‰ªéÂàõÊÑèËÆæËÆ°ÂÖ•Êâã",
        "‰ªéÂÆûÈôÖÈúÄÊ±ÇÂÖ•Êâã",
        "‰ªéÁ¨¨‰∏ÄÂç∞Ë±°ÂÖ•Êâã",
        "‰ªéÊúÄÁªàÊàêÊûúÂÖ•Êâã",
        "‰ªéËàíÈÄÇÂ∫¶ÂÖ•Êâã",
        "‰ªéÊñπ‰æøÁ®ãÂ∫¶ÂÖ•Êâã",
        "‰ªéÊÉäÂñúÊÑüÂÖ•Êâã",
        "‰ªéÊîæÊùæÊÑüÂÖ•Êâã",
        "‰ªé‰ø°‰ªªÊÑüÂÖ•Êâã",
        "‰ªéÊª°ÊÑèÂ∫¶ÂÖ•Êâã",
        "‰ªéÂèòÁæéÊïàÊûúÂÖ•Êâã",
        "‰ªéÂøÉÊÉÖÂèòÂåñÂÖ•Êâã"
      ];
      
      const randomPerspective = perspectives[Math.floor(Math.random() * perspectives.length)];
      
      // 30+ÁßçÂºÄÂ§¥ÊñπÂºè
      const openings = [
        "‰ªäÂ§©Êù•",
        "Âë®Êú´ËøáÊù•",
        "ÊúãÂèãÊé®ËçêÊù•ÁöÑ",
        "Á¨¨‰∏ÄÊ¨°Êù•",
        "ÂèàÊù•‰∫Ü",
        "Âõ¢Ë¥≠ËøáÊù•ÁöÑ",
        "Ë∑ØËøáËøõÊù•ÁúãÁúã",
        "Êò®Â§©È¢ÑÁ∫¶ÁöÑ",
        "‰∏ãÁè≠ËøáÊù•",
        "ÈÄõË°óË∑ØËøá",
        "ÁúãËØÑ‰ª∑‰∏çÈîôÊù•ÁöÑ",
        "‰πãÂâçÊù•Ëøá",
        "Âê¨Âêå‰∫ãËØ¥",
        "Âú®ÁΩë‰∏äÁúãÂà∞",
        "ÈôÑËøëÊâæ‰∫ÜÂÆ∂",
        "Êó©Â∞±ÊÉ≥Êù•",
        "Áªà‰∫éÊúâÊó∂Èó¥",
        "Ë∂ÅÁùÄÊúâÊ¥ªÂä®",
        "Ê≠£Â•ΩÊúâÁ©∫",
        "‰∏ìÈó®ËøáÊù•",
        "È°∫Ë∑ØËøáÊù•",
        "Á∫¶‰∫ÜÊúãÂèã",
        "‰∏ÄÁõ¥ÊÉ≥Êç¢ÂèëÂûã",
        "Èó∫ËúúÊé®Ëçê",
        "‰∏ãÂçàÊù•",
        "‰∏äÂçàËøáÊù•",
        "‰∏≠ÂçàÊù•",
        "Êôö‰∏äÊù•",
        "ÊîæÂÅáÊù•",
        "Âë®‰∏≠Êù•",
        "ÊèêÂâçÈ¢ÑÁ∫¶‰∫Ü",
        "‰∏¥Êó∂ÂÜ≥ÂÆö",
        "Êó©Â∞±ÂÖ≥Ê≥®‰∫Ü",
        "Á≠â‰∫ÜÂ•Ω‰πÖ"
      ];
      const randomOpening = openings[Math.floor(Math.random() * openings.length)];
      
      // 40+ÁßçÁúüÂÆûÁªÜËäÇÔºàÂÖ®ÈÉ®Ê≠£Èù¢Ôºâ
      const aspects = [
        "ÂèØ‰ª•ÊèêÂà∞È¢ÑÁ∫¶ÂæàÊñπ‰æø",
        "ÂèØ‰ª•ÊèêÂà∞‰ª∑Ê†ºÊå∫ÂêàÁêÜ",
        "ÂèØ‰ª•ÊèêÂà∞‰ΩçÁΩÆÂ•ΩÊâæ",
        "ÂèØ‰ª•ÊèêÂà∞ÂÅúËΩ¶Êñπ‰æø",
        "ÂèØ‰ª•ÊèêÂà∞ÁéØÂ¢ÉËàíÈÄÇ",
        "ÂèØ‰ª•ÊèêÂà∞Èü≥‰πêÂ•ΩÂê¨",
        "ÂèØ‰ª•ÊèêÂà∞Ë£Ö‰øÆÊúâÂìÅ‰Ωç",
        "ÂèØ‰ª•ÊèêÂà∞‰∫ßÂìÅÂë≥ÈÅìÂ•ΩÈóª",
        "ÂèØ‰ª•ÊèêÂà∞Ê¥óÂèëÊ∞¥Ë¥®ÈáèÂ•Ω",
        "ÂèØ‰ª•ÊèêÂà∞ÊåâÊë©ÊâãÊ≥ïËàíÊúç",
        "ÂèØ‰ª•ÊèêÂà∞‰∫∫ÊµÅÈÄÇ‰∏≠",
        "ÂèØ‰ª•ÊèêÂà∞‰∏ç‰ºöÊé®ÈîÄ",
        "ÂèØ‰ª•ÊèêÂà∞Ëå∂Ê∞¥È•ÆÂìÅË¥¥ÂøÉ",
        "ÂèØ‰ª•ÊèêÂà∞Âç´ÁîüÂπ≤ÂáÄ",
        "ÂèØ‰ª•ÊèêÂà∞Á©∫Ë∞ÉÊ∏©Â∫¶ËàíÈÄÇ",
        "ÂèØ‰ª•ÊèêÂà∞ÂÖâÁ∫øÊüîÂíå",
        "ÂèØ‰ª•ÊèêÂà∞ÈïúÂ≠êÊ∏ÖÊô∞",
        "ÂèØ‰ª•ÊèêÂà∞Â∫ßÊ§ÖËàíÈÄÇ",
        "ÂèØ‰ª•ÊèêÂà∞Â∑•ÂÖ∑Âπ≤ÂáÄ",
        "ÂèØ‰ª•ÊèêÂà∞Ê≤üÈÄöÈ°∫ÁïÖ",
        "ÂèØ‰ª•ÊèêÂà∞Âª∫ËÆÆ‰∏ì‰∏ö",
        "ÂèØ‰ª•ÊèêÂà∞Êó∂Èó¥ÊääÊéßÂ•Ω",
        "ÂèØ‰ª•ÊèêÂà∞ÁªÜËäÇÂà∞‰Ωç",
        "ÂèØ‰ª•ÊèêÂà∞Êî∂Â∞æ‰ªîÁªÜ",
        "ÂèØ‰ª•ÊèêÂà∞ÊâìÁêÜÂª∫ËÆÆÂÆûÁî®",
        "ÂèØ‰ª•ÊèêÂà∞ÂêéÁª≠Êä§ÁêÜÊåáÂØº",
        "ÂèØ‰ª•ÊèêÂà∞Ëøò‰ºöÂÜçÊù•",
        "ÂèØ‰ª•ÊèêÂà∞‰∫§ÈÄö‰æøÂà©",
        "ÂèØ‰ª•ÊèêÂà∞Âë®ËæπÈÖçÂ•óÂ•Ω",
        "ÂèØ‰ª•ÊèêÂà∞Ëê•‰∏öÊó∂Èó¥ÂêàÈÄÇ",
        "ÂèØ‰ª•ÊèêÂà∞‰ºöÂëò‰ºòÊÉ†ÂÆûÂú®",
        "ÂèØ‰ª•ÊèêÂà∞Ê¥ªÂä®ÁªôÂäõ",
        "ÂèØ‰ª•ÊèêÂà∞ÊîØ‰ªòÊñπ‰æø",
        "ÂèØ‰ª•ÊèêÂà∞ÂëòÂ∑•ÁÉ≠ÊÉÖ",
        "ÂèØ‰ª•ÊèêÂà∞Âª∫ËÆÆ‰∏≠ËÇØ",
        "ÂèØ‰ª•ÊèêÂà∞‰∏™ÊÄßÂåñÊúçÂä°Â•Ω",
        "ÂèØ‰ª•ÊèêÂà∞Ê∞õÂõ¥ËΩªÊùæ",
        "ÂèØ‰ª•ÊèêÂà∞ÊúçÂä°Âë®Âà∞",
        "ÂèØ‰ª•ÊèêÂà∞ÊïàÁéáÈ´ò",
        "ÂèØ‰ª•ÊèêÂà∞ÊÄÅÂ∫¶Â•Ω"
      ];
      const randomAspect = aspects[Math.floor(Math.random() * aspects.length)];
      
      // 30+ÁßçÂè•ÂºèÁªìÊûÑ
      const structures = [
        "Â§öÁî®Áü≠Âè•ÔºåÁÆÄÊ¥ÅÊòéÂø´",
        "ÈïøÁü≠Âè•ÁªìÂêàÔºåÊúâËäÇÂ•èÊÑü",
        "Â§öÁî®Âè£ËØ≠ÂåñËΩ¨ÊäòËØç",
        "ÈááÁî®ÊÄªÂàÜÊÄªÁªìÊûÑ",
        "ÈááÁî®ÊµÅÊ∞¥Ë¥¶ÂºèÂèôËø∞",
        "ÈááÁî®ÂØπËØùÂºèË°®Ëææ",
        "ÈááÁî®ÊÑüÂèπÂºèËØ≠Ê∞î",
        "ÈááÁî®ÁñëÈóÆÂºèÂºïÂÖ•",
        "ÂÖàËØ¥ËøáÁ®ãÂêéËØ¥ÊïàÊûú",
        "ÂÖàËØ¥ÊïàÊûúÂÜçËØ¥ÊÑüÂèó",
        "Êó∂Èó¥È°∫Â∫èÂèôËø∞",
        "Á©∫Èó¥È°∫Â∫èÊèèËø∞",
        "ÈáçÁÇπÁ™ÅÂá∫Âºè",
        "ÂØπÊØîÂºèË°®Ëææ",
        "ÈÄíËøõÂºèÂèôËø∞",
        "Âπ∂ÂàóÂºèÊèèËø∞",
        "‰∏æ‰æãËØ¥ÊòéÂºè",
        "ÊÄªÁªìÂΩíÁ∫≥Âºè",
        "ÊÑüÂèóÂàÜ‰∫´Âºè",
        "‰ΩìÈ™åËÆ∞ÂΩïÂºè",
        "Âç∞Ë±°ÊèèËø∞Âºè",
        "ÂèòÂåñÂØπÊØîÂºè",
        "ÁªÜËäÇÂ±ïÂºÄÂºè",
        "Ê∞õÂõ¥Ê∏≤ÊüìÂºè",
        "ÊïàÊûúÂ±ïÁ§∫Âºè",
        "ËøáÁ®ãÂõûÈ°æÂºè",
        "ÂøÉÊÉÖË°®ËææÂºè",
        "ËΩªÊùæËÅäÂ§©Âºè",
        "ÈöèÊÑèÂàÜ‰∫´Âºè",
        "ÁúüËØöÊé®ËçêÂºè"
      ];
      const randomStructure = structures[Math.floor(Math.random() * structures.length)];
      
      // 30+ÁßçÁúüÂÆûÁî®ËØçÁªÑÂêà
      const vocabularies = [
        "Êå∫„ÄÅËøòË°å„ÄÅ‰∏çÈîô„ÄÅÂèØ‰ª•„ÄÅËõÆÂ•Ω",
        "ÊÑüËßâ„ÄÅËßâÂæó„ÄÅÂèëÁé∞„ÄÅÁúãÁùÄ„ÄÅÊòæÂæó",
        "Â∞±ÊòØ„ÄÅ‰∏çËøá„ÄÅÂèçÊ≠£„ÄÅÊÄª‰πã„ÄÅËÄå‰∏î„ÄÅÊâÄ‰ª•",
        "Á°ÆÂÆû„ÄÅÁúüÁöÑ„ÄÅËØ¥ÂÆûËØù„ÄÅËÄÅÂÆûËØ¥„ÄÅÂÆûËØùËØ¥",
        "ÊØîËæÉ„ÄÅÁÆóÊòØ„ÄÅÂ∫îËØ•„ÄÅÂ§ßÊ¶Ç„ÄÅÂ∑Æ‰∏çÂ§ö„ÄÅÂü∫Êú¨",
        "ËøòÂ•Ω„ÄÅËøòÂèØ‰ª•„ÄÅËøò‰∏çËµñ„ÄÅËøòÊå∫Â•Ω",
        "Êå∫Êª°ÊÑè„ÄÅÊå∫Â•ΩÁöÑ„ÄÅÊå∫ËàíÊúç„ÄÅÊå∫Âø´ÁöÑ",
        "ËõÆÂñúÊ¨¢„ÄÅËõÆÂ•Ω„ÄÅËõÆËàíÊúç„ÄÅËõÆ‰∏ì‰∏öÁöÑ",
        "ÂæàÊª°ÊÑè„ÄÅÂæàËàíÊúç„ÄÅÂæàÂñúÊ¨¢„ÄÅÂæàÂ•Ω",
        "Áõ∏ÂΩì‰∏çÈîô„ÄÅÁõ∏ÂΩìÊª°ÊÑè„ÄÅÁõ∏ÂΩìËàíÊúç",
        "Ë∂ÖÁ∫ßÂ•Ω„ÄÅË∂ÖÊª°ÊÑè„ÄÅË∂ÖÂñúÊ¨¢",
        "ÁâπÂà´Â•Ω„ÄÅÁâπÂà´Êª°ÊÑè„ÄÅÁâπÂà´ËàíÊúç",
        "ÁúüÂøÉ‰∏çÈîô„ÄÅÁúüÂøÉÊª°ÊÑè„ÄÅÁúüÂøÉÊé®Ëçê",
        "ÁúãÁùÄ‰∏çÈîô„ÄÅÁúãÁùÄÊå∫Â•Ω„ÄÅÁúãÁùÄÊª°ÊÑè",
        "Âê¨ÁùÄËàíÊúç„ÄÅÈóªÁùÄÂ•ΩÈóª„ÄÅÊë∏ÁùÄÈ°∫Êªë",
        "ÂÅöÂæóÂ•Ω„ÄÅÂâ™ÂæóÂ•Ω„ÄÅÁÉ´ÂæóÂ•Ω„ÄÅÊüìÂæóÂ•Ω",
        "ÂºÑÂæó‰∏çÈîô„ÄÅÊêûÂæóÊå∫Â•Ω„ÄÅÊï¥ÂæóÊª°ÊÑè",
        "ÊïàÊûúÂ•Ω„ÄÅÊâãÊ≥ïÂ•Ω„ÄÅÊäÄÊúØÂ•Ω„ÄÅÊÄÅÂ∫¶Â•Ω",
        "Êå∫Èù†Ë∞±„ÄÅÊå∫‰∏ì‰∏ö„ÄÅÊå∫ÁªÜÂøÉ„ÄÅÊå∫ËÄêÂøÉ",
        "ËõÆËÆ§Áúü„ÄÅËõÆ‰ªîÁªÜ„ÄÅËõÆÁî®ÂøÉ„ÄÅËõÆË¥üË¥£",
        "ÂæàËÆ§Áúü„ÄÅÂæà‰ªîÁªÜ„ÄÅÂæàÁî®ÂøÉ„ÄÅÂæàË¥üË¥£",
        "ÊØîÊÉ≥Ë±°‰∏≠Â•Ω„ÄÅÊØîÈ¢ÑÊúüÂ•Ω„ÄÅÊØî‰πãÂâçÂ•Ω",
        "Ë∂äÊù•Ë∂äÂ•Ω„ÄÅ‰∏ÄÂ¶ÇÊó¢ÂæÄÂ•Ω„ÄÅÂßãÁªàÂ¶Ç‰∏Ä",
        "Ê≤°ËÆ©Â§±Êúõ„ÄÅÊ≤°ÁôΩÊù•„ÄÅÂÄºÂæóÊù•",
        "Êù•ÂØπ‰∫Ü„ÄÅÈÄâÂØπ‰∫Ü„ÄÅÊâæÂØπ‰∫Ü",
        "Ëøò‰ºöÊù•„ÄÅ‰ºöÂÜçÊù•„ÄÅÁªßÁª≠ÂÖâÈ°æ",
        "ÂÄºÂæóÊé®Ëçê„ÄÅÂèØ‰ª•Êé®Ëçê„ÄÅÊé®ËçêÁªôÊúãÂèã",
        "ÊîæÂøÉ„ÄÅÂÆâÂøÉ„ÄÅËàíÂøÉ„ÄÅÁúÅÂøÉ",
        "Êª°ÊÑè„ÄÅÂºÄÂøÉ„ÄÅÈ´òÂÖ¥„ÄÅÊÑâÂø´",
        "ÂñúÊ¨¢„ÄÅÈíüÊÑè„ÄÅ‰∏≠ÊÑè„ÄÅÂêàÈÄÇ"
      ];
      const randomVocabulary = vocabularies[Math.floor(Math.random() * vocabularies.length)];
      
      btnGen.disabled = true; btnGen.textContent = "ÁîüÊàê‰∏≠‚Ä¶"; status.textContent = "Ê≠£Âú®ËøûÊé•AIÊúçÂä°...";
      
      console.log('ÂºÄÂßãÁîüÊàêÊñáÊ°à...');
      console.log('Á±ªÁõÆ:', category);
      console.log('ÊúçÂä°‰∫∫Âëò:', staff);
      console.log('ÁõÆÊ†áÈïøÂ∫¶:', targetLength);
      console.log('È£éÊ†º:', randomStyle);
      console.log('ÂàáÂÖ•ÁÇπ:', randomPerspective);
      
      try {
        const system = `‰Ω†ÊòØ‰∏Ä‰∏™ÁúüÂÆûÁöÑÊôÆÈÄöÈ°æÂÆ¢ÔºåÂàöÂÅöÂÆåÁæéÂèëÔºåÊ≠£Âú®ÊâãÊú∫‰∏äÂÜôÂ•ΩËØÑ„ÄÇ

„ÄêÁªùÂØπÁ¶ÅÊ≠¢ÁöÑÂÆòÊñπÂ•óËØù„Äë
Á¶ÅÁî®ÔºöÈùûÂ∏∏Â•Ω„ÄÅÂº∫ÁÉàÊé®Ëçê„ÄÅ‰∫îÊòüÂ•ΩËØÑ„ÄÅÂÄºÂæó‰ø°Ëµñ„ÄÅ‰∏ì‰∏öÂõ¢Èòü„ÄÅÊäÄÊúØÁ≤æÊπõ„ÄÅÊúçÂä°Âë®Âà∞„ÄÅÁéØÂ¢É‰ºòÈõÖ„ÄÅÊÄß‰ª∑ÊØîË∂ÖÈ´ò„ÄÅÁâ©Ë∂ÖÊâÄÂÄº

„ÄêÂøÖÈ°ª‰ΩøÁî®ÁöÑÂè£ËØ≠Ë°®Ëææ„Äë
Â§öÁî®Ôºö${randomVocabulary}

„ÄêÂÜô‰ΩúË¶ÅÊ±Ç„Äë
1. ÂÉèË∑üÊúãÂèãÂæÆ‰ø°ËÅäÂ§©‰∏ÄÊ†∑Ëá™ÁÑ∂ÈöèÊÑè
2. ${randomStructure}
3. ÂÖ®ÈÉ®ÈÉΩÊòØÊ≠£Èù¢Â•ΩËØÑÔºå‰ΩÜÁî®Âè£ËØ≠ÂåñË°®Ëææ
4. Â∞±ÂÉèÁúü‰∫∫Âú®ÊâãÊú∫‰∏äÈöèÊâãÊâìÂ≠ó
5. Ëá™ÁÑ∂ÁúüÂÆûÔºå‰∏çÂàªÊÑèÂ†ÜÁ†å

„ÄêÈ£éÊ†ºÂÆö‰Ωç„Äë
${randomStyle}

„ÄêÂàáÂÖ•ËßíÂ∫¶„Äë  
${randomPerspective}

„ÄêÁúüÂÆûÁî®Êà∑Â∏∏ËßÅË°®ËææÔºàÂ•ΩËØÑÁâàÔºâ„Äë
- "‰ªäÂ§©Ââ™‰∫Ü‰∏™Â§¥ÂèëÔºåÊå∫Êª°ÊÑèÁöÑ"
- "ËÄÅÂ∏àÊâãËâ∫Á°ÆÂÆû‰∏çÈîô"
- "ÁéØÂ¢ÉËøòÊå∫Âπ≤ÂáÄËàíÊúçÁöÑ"
- "Ëøô‰∏™‰ª∑Ê†ºËøòÁÆóÂèØ‰ª•"
- "Á≠â‰∫Ü‰ºöÂÑøÔºåÊïàÊûúÂá∫Êù•ËøòÊå∫Â•Ω"
- "Êå∫Êª°ÊÑèÁöÑÔºåÊÑüËßâËøò‰ºöÊù•"
- "ÂÅöÂæóËõÆÂ•ΩÁöÑÔºåÊúãÂèãÈÉΩËØ¥Â•ΩÁúã"
- "ÊÄª‰ΩìÊù•ËØ¥Êå∫Êª°ÊÑè"`;
        
        let userMsg = `ÂÜô‰∏Ä‰∏™${category}ÁöÑÁúüÂÆûÂ•ΩËØÑÔºå${targetLength}Â≠ó„ÄÇ`;
        if (staff) {
          userMsg += `ÂÅöÁöÑÊòØ${staff}„ÄÇ`;
        }
        userMsg += `\n\n„ÄêÊú¨Ê¨°ÁîüÊàêË¶ÅÊ±Ç„Äë
1. È£éÊ†ºÔºö${randomStyle.split('Ôºö')[0]}
2. ÂàáÂÖ•ÁÇπÔºö${randomPerspective}
3. ÂºÄÂ§¥ÂèÇËÄÉÔºö${randomOpening}Ôºà‰∏çË¶ÅÁÖßÊäÑÔºåËá™ÁÑ∂ÂºïÂÖ•Ôºâ
4. ÁªÜËäÇ‰∫ÆÁÇπÔºö${randomAspect}
5. Âè•ÂºèÁªìÊûÑÔºö${randomStructure}
6. Â∏∏Áî®ËØçÊ±áÔºö${randomVocabulary}
7. Â≠óÊï∞Á≤æÁ°ÆÔºö${targetLength}Â≠óÂ∑¶Âè≥
8. Âè£ËØ≠Ëá™ÁÑ∂ÔºöÂÉèÊâãÊú∫ÊâìÂ≠óËÅäÂ§©
9. ÈÅøÂÖçÊ®°ÊùøÂåñÔºöÊØèÊ¨°Ë°®ËææÊñπÂºèÂÆåÂÖ®‰∏çÂêå
10. ÂÖ®ÊòØÂ•ΩËØÑÔºö‰ΩÜ‰∏çË¶ÅÂÆòÊñπËØùÊúØ
11. Ê†ºÂºèÔºöÁ∫ØÊñáÊú¨ÔºåÊó†ÂºïÂè∑„ÄÅÊó†Á¨¶Âè∑

„ÄêÁâπÂà´ÊèêÈÜí„Äë
- ÂÖ®ÈÉ®Ê≠£Èù¢ËØÑ‰ª∑Ôºå‰ΩÜÁî®Â§ßÁôΩËØù
- ‰∏çË¶ÅÂÜôÂæóÂÉèÂπøÂëäÊàñÂÆòÊñπÊñáÊ°à
- ÂÉè‰Ω†Ëá™Â∑±ÂéªÂÅöÂÆåÂ§¥ÂèëÈöèÊâãÂÜôÁöÑÁúüÂÆûÂ•ΩËØÑ
- ÊØèÊ¨°Áî®ËØç„ÄÅÂè•Âºè„ÄÅË°®ËææËßíÂ∫¶ÈÉΩË¶ÅÊòéÊòæ‰∏çÂêå`;
        
        status.textContent = "AIÊ≠£Âú®ÁîüÊàêËØÑ‰ª∑...";
        
        const raw = await callChatCompletions({ 
          apiBase: DEEPSEEK_CONFIG.apiBase, 
          apiKey: DEEPSEEK_CONFIG.apiKey, 
          model: DEEPSEEK_CONFIG.model, 
          system, 
          user: userMsg, 
          temperature: 0.9,  // ÊèêÈ´òÊ∏©Â∫¶Â¢ûÂä†ÈöèÊú∫ÊÄß
          maxTokens: 500 
        });
        
        console.log('AIËøîÂõûÁªìÊûú:', raw);
        
        const text = cutToLength(raw, targetLength);
        result.style.display = "block";
        result.textContent = text;
        btnCopyGo.disabled = !text;
        const actualLength = text.replace(/\s+/g, "").length;
        status.textContent = text ? `‚úÖ Â∑≤ÁîüÊàêÁúüÂÆûËØÑ‰ª∑ÔºåÂÖ±${actualLength}Â≠ó | È£éÊ†ºÔºö${randomStyle.split('Ôºö')[0]}` : "ÁîüÊàêÂ§±Ë¥•ÔºåËØ∑ÈáçËØï";
      } catch (e) {
        console.error('ÁîüÊàêÊñáÊ°àÂ§±Ë¥•:', e);
        result.style.display = "block";
        result.textContent = `ÁîüÊàêÂ§±Ë¥•Ôºö${e.message}`;
        status.textContent = "‚ùå ËØ∑Ê±ÇÂ§±Ë¥•Ôºö" + (e && e.message ? e.message : e);
      } finally {
        btnGen.disabled = false; btnGen.textContent = "ÁîüÊàêÊñáÊ°à";
      }
    }

    async function copyText(text) {
      try {
        if (navigator.clipboard?.writeText) {
          await navigator.clipboard.writeText(text);
          return true;
        }
      } catch (_) {}
      // ÊóßÊñπÊ°àÂÖúÂ∫ï
      const ta = document.createElement("textarea");
      ta.value = text; document.body.appendChild(ta);
      ta.select(); ta.setSelectionRange(0, 99999);
      const ok = document.execCommand("copy");
      document.body.removeChild(ta);
      return ok;
    }

    // Ë∑≥ËΩ¨Âà∞Â∫óÈì∫
    function jumpToShop() {
      const platform = $("shopPlatform").value;
      const shopInfo = MEITUAN_SHOP_INFO;
      const shopDetails = `Â∫óÈì∫ÂêçÁß∞Ôºö${shopInfo.name}\nÂ∫óÈì∫Âú∞ÂùÄÔºö${shopInfo.address}\nËÅîÁ≥ªÁîµËØùÔºö${shopInfo.phone}`;
      
      const deepLink = DEEP_LINKS[platform];
      const platformNames = {
        meituan: "ÁæéÂõ¢",
        dianping: "Â§ß‰ºóÁÇπËØÑ",
        douyin: "ÊäñÈü≥"
      };
      const platformName = platformNames[platform] || platform;
      
      console.log(`Ë∑≥ËΩ¨Âà∞${platformName}Â∫óÈì∫`);
      status.textContent = `Ê≠£Âú®Ë∞ÉËµ∑${platformName}APP...\n\n${shopDetails}\n\nÊ∑±Â∫¶ÈìæÊé•: ${deepLink}`;
      
      try {
        // ‰ΩøÁî®iframeÂ∞ùËØïË∞ÉËµ∑APP
        const iframe = document.createElement('iframe');
        iframe.style.display = 'none';
        iframe.src = deepLink;
        document.body.appendChild(iframe);
        
        let appOpened = false;
        
        // ÁõëÂê¨È°µÈù¢ÂèØËßÅÊÄßÂèòÂåñÔºàAPPÊâìÂºÄÊó∂È°µÈù¢‰ºöÂ§±ÂéªÁÑ¶ÁÇπÔºâ
        const handleVisibilityChange = () => {
          if (document.hidden) {
            appOpened = true;
            status.textContent = `‚úÖ ÊàêÂäüÔºÅ${platformName}APPÂ∑≤Ë∞ÉËµ∑ÔºÅ\n\n${shopDetails}\n\nÊ∑±Â∫¶ÈìæÊé•: ${deepLink}\n\nËØ∑Ê£ÄÊü•ÊòØÂê¶Ë∑≥ËΩ¨Âà∞Â∫óÈì∫‰∏ªÈ°µ`;
            document.removeEventListener('visibilitychange', handleVisibilityChange);
          }
        };
        
        document.addEventListener('visibilitychange', handleVisibilityChange);
        
        // 3ÁßíÂêéÊ£ÄÊµãÔºåÂ¶ÇÊûúÂ§±Ë¥•ÂàôÂ∞ùËØïÊâìÂºÄÁΩëÈ°µÁâà
            setTimeout(() => {
          if (iframe.parentNode) {
            document.body.removeChild(iframe);
          }
          document.removeEventListener('visibilitychange', handleVisibilityChange);
          
          if (!appOpened) {
            // Â¶ÇÊûúÊ∑±Â∫¶ÈìæÊé•Â§±Ë¥•ÔºåÂ∞ùËØïÊâìÂºÄÁΩëÈ°µÁâàÔºàÁΩëÈ°µÁâà‰ºöËá™Âä®ÊèêÁ§∫ÊâìÂºÄAPPÔºâ
            const webUrl = SHOP_INFO[platform]?.url;
            if (webUrl) {
              status.textContent = `‚ö†Ô∏è Ê∑±Â∫¶ÈìæÊé•Ë∞ÉËµ∑Â§±Ë¥•ÔºåÊ≠£Âú®Ë∑≥ËΩ¨Âà∞${platformName}ÁΩëÈ°µÁâà...\n\n${shopDetails}\n\nÁΩëÈ°µÁâà‰ºöËá™Âä®ÊèêÁ§∫ÊâìÂºÄAPP`;
          setTimeout(() => {
                window.location.href = webUrl;
              }, 500);
            } else {
              status.textContent = `‚ùå Ë∞ÉËµ∑${platformName}APPÂ§±Ë¥•\n\n${shopDetails}\n\nÊ∑±Â∫¶ÈìæÊé•: ${deepLink}\n\nËØ∑Á°Æ‰øùÂ∑≤ÂÆâË£Ö${platformName}APP`;
            }
          }
        }, 3000);
        
      } catch (e) {
        console.log(`Ë∞ÉËµ∑${platformName}APPÂ§±Ë¥•:`, e);
        status.textContent = `‚ùå Ë∞ÉËµ∑${platformName}APPÂ§±Ë¥•Ôºö${e.message}\n\n${shopDetails}`;
      }
    }
    
    // Â§çÂà∂Âπ∂Ë∑≥ËΩ¨
    async function copyAndJump() {
      const text = result.textContent.trim();
      if (!text) return;
      
      const ok = await copyText(text);
      const platform = $("shopPlatform").value;
      const platformNames = {
        meituan: "ÁæéÂõ¢",
        dianping: "Â§ß‰ºóÁÇπËØÑ",
        douyin: "ÊäñÈü≥"
      };
      const platformName = platformNames[platform] || "Â∫óÈì∫";
      
      if (ok) {
        // Â¶ÇÊûúÂú®ÂæÆ‰ø°‰∏≠ÔºåÊèêÁ§∫Áî®Êà∑
        if (isWechat()) {
          status.textContent = `‚úÖ ÊñáÊ°àÂ∑≤Â§çÂà∂ÔºÅ\n\nÁî±‰∫éÂæÆ‰ø°ÈôêÂà∂ÔºåÊó†Ê≥ïËá™Âä®Ë∞ÉËµ∑${platformName}APP\n\nËØ∑Êåâ‰ª•‰∏ãÊ≠•È™§Êìç‰ΩúÔºö\n1. ÁÇπÂáªÂè≥‰∏äËßí"..."ÈÄâÊã©"Âú®ÊµèËßàÂô®‰∏≠ÊâìÂºÄ"\n2. ÊàñÊâãÂä®ÊâìÂºÄ${platformName}APP\n3. Á≤òË¥¥ËØÑ‰ª∑ÂÜÖÂÆπ`;
          
          // ÊòæÁ§∫Êìç‰ΩúÊèêÁ§∫ÂºπÁ™ó
          setTimeout(() => {
            alert(`‚úÖ ÊñáÊ°àÂ∑≤Â§çÂà∂Âà∞Ââ™Ë¥¥ÊùøÔºÅ\n\nÁî±‰∫éÂæÆ‰ø°ÈôêÂà∂ÔºåÊó†Ê≥ïËá™Âä®Ë∞ÉËµ∑${platformName}APP\n\nËØ∑Êåâ‰ª•‰∏ãÊ≠•È™§Êìç‰ΩúÔºö\n\n1. ÁÇπÂáªÂè≥‰∏äËßí"..." \n2. ÈÄâÊã©"Âú®ÊµèËßàÂô®‰∏≠ÊâìÂºÄ"\n3. ÁÑ∂ÂêéÂÜçÊ¨°ÁÇπÂáª"Â§çÂà∂Âπ∂Ë∑≥ËΩ¨"ÊåâÈíÆ\n\nÊàñËÄÖÔºö\n1. ÊâãÂä®ÊâìÂºÄ${platformName}APP\n2. ÊâæÂà∞Â∫óÈì∫\n3. Á≤òË¥¥ËØÑ‰ª∑ÂÜÖÂÆπ`);
          }, 500);
          
          return;
        }
        
        status.textContent = `ÊñáÊ°àÂ∑≤Â§çÂà∂ÔºåÊ≠£Âú®ÊâìÂºÄ${platformName}Â∫óÈì∫‚Ä¶`;
        
        // Ë∞ÉËµ∑APPÂπ∂Ë∑≥ËΩ¨
        const deepLink = DEEP_LINKS[platform];
        
        try {
          // ‰ΩøÁî®iframeÂ∞ùËØïË∞ÉËµ∑APP
          const iframe = document.createElement('iframe');
          iframe.style.display = 'none';
          iframe.src = deepLink;
          document.body.appendChild(iframe);
          
          setTimeout(() => {
            if (iframe.parentNode) {
              document.body.removeChild(iframe);
            }
            status.textContent = `‚úÖ ÊñáÊ°àÂ∑≤Â§çÂà∂Ôºå${platformName}APPÂ∑≤Ë∞ÉËµ∑ÔºÅ\n\nËØ∑Âú®APP‰∏≠Á≤òË¥¥ËØÑ‰ª∑ÂÜÖÂÆπ`;
          }, 2000);
          
        } catch (e) {
          console.log('Ë∞ÉËµ∑APPÂ§±Ë¥•:', e);
          status.textContent = `‚úÖ ÊñáÊ°àÂ∑≤Â§çÂà∂ÔºÅ\n\nËØ∑ÊâãÂä®ÊâìÂºÄ${platformName}APPÂπ∂Á≤òË¥¥ËØÑ‰ª∑ÂÜÖÂÆπ`;
        }
      } else {
        status.textContent = "‚ùå Â§çÂà∂Â§±Ë¥•ÔºåËØ∑ÊâãÂä®Â§çÂà∂ÊñáÊ°à";
      }
    }
    
    // ÁªëÂÆöÊåâÈíÆ‰∫ã‰ª∂
    btnGen.addEventListener("click", generate);
    btnCopyGo.addEventListener("click", copyAndJump);
  </script>
  
</body>
</html>